<html>
    <head>
    </head>
    <body>
        <script>
let total_q_number=50;//問題数//
let total_number=2;//回答数//
var ratio;//正答率//
var time;//解答時間//
var q_number=0;//問題番号初期化//
var question;//問題文//
var select1;//選択肢1//
var select2;//選択肢2//
var select3;//選択肢3//
var select4;//選択肢4//
var select5;//選択肢5//
var correct;//正答//
var answer;//正答//
var compliment;//最終評価//
var c_number=0;//正答数の初期化//
var order=Array(total_number);//回答数の要素数の配列作成（今回は5）//
order.fill(0);//orderが[0, 0, 0, 0, 0]に初期化//
var k=0;//ループ変数//

//問題、選択肢、正答を作成する関数//
function select_question(){
    if(order[q_number]==1){
        question="y=2x^3-3x^2-36x+6のグラフをCとする。C上のx=aの点における接線lがCと接点以外に共有点を持たないときのaの値を求めよ。";
        select1="a=1/2";
        select2="a=1";
        select3="a=3/2";
        select4="a=2";
        select5="わからない";
        correct="1";
    }
    else if(order[q_number]==2){
        question="y=x^2とy=x^2-2x+3の共通接線を求めよ。";
        select1="y=2x+1";
        select2="y=2x-1";
        select3="y=-2x+1";
        select4="y=-2x-1";
        select5="わからない";
        correct="2";
    }
    else if(order[q_number]==3){
        question="y=4x^3+2x^2+3上の点Pにおける接線が(1/2,4)を通るとき点Pの座標を求めよ。";
        select1="(1,9)";
        select2="(-1,1)";
        select3="(-1/2,3)";
        select4="(0,3)";
        select5="わからない";
        correct="3";
    }
    else if(order[q_number]==4){
        question="y=x^3-2x上の点P(a,a^3-2a)と点Q(b,b^3-2a)について、点P,Qにおける接線の傾きは等しい。2点P,Qを通る直線と点Pにおける接線が直行するとき、点Pの座標を求めよ。ただし、格子点のみでよい。";
        select1="(1,1)";
        select2="-1,-1";
        select3="(-1,1)";
        select4="(1,-1)";
        select5="わからない";
        correct="4";
    }
    else if(order[q_number]==5){
        question="半径aの球に内接する円柱の体積Vの最大値を求めよ。";
        select1="V=4√3πa^3/9";
        select2="V=√3πa^3/2";
        select3="V=4√3πa^3/7";
        select4="V=2√3πa^3/3";
        select5="わからない";
        correct="1";
    }
    else if(order[q_number]==6){
        question="y=ax^3+bx^2+cx+dにおいて、x=-1,1でそれぞれ極値2,4をもつとき、定数a,b,c,dを求めよ。";
        select1="a=1/2,b=0,c=3/2,d=3";
        select2="a=-1/2,b=0,c=3/2,d=3";
        select3="a=-1/2,b=0.c=1,d=2";
        select4="a=1/2,b=0,c=1,d=2";
        select5="わからない";
        correct="2";
    }
    else if(order[q_number]==7){
        question="y=ax^3+3bx^2+3cxはx=1において極大値、x=3において極小値をとり、極大値と極小値の差は8である。定数a,b,cの値を求めよ。";
        select1="a=2,b=4,c=-6";
        select2="a=-2,b=4,c=6";
        select3="a=2,b=-4,c=6";
        select4="a=-2b=4,c=-6";
        select5="わからない";
        correct="3";
    }
    else if(order[q_number]==8){
        question="2x^3-3x^2-12x+a=0の解が、2つの異なる負の数と1つの正の数であるとき、aの値の範囲を求めよ。";
        select1="a≦-7,0≦a";
        select2="a<-7,0<a";
        select3="-7≦a≦0";
        select4="-7<a<0";
        select5="わからない";
        correct="4";
    }
    else if(order[q_number]==9){
        question="y=x^3-3x^2-7xとy=2x+kのグラフが異なる3点で交わるとき、kの値の範囲を求めよ。";
        select1="-27<k<5";
        select2="-27≦k≦5";
        select3="k<-27,5<k";
        select4="k≦-27,5≦k";
        select5="わからない";
        correct="1";
    }
    else if(order[q_number]==10){
        question="y=x^3+ax^2+bx+cはx=0で極大値4をとり、グラフはx軸に接する。定数a,b,cの値を求めよ。";
        select1="a=3,b=0,c=4";
        select2="a=-3,b=0,c=4";
        select3="a=-3,b=0,c=-4";
        select4="a=3,b=0,c=-4";
        select5="わからない";
        correct="2";
    }

}

//正答表示//
function cor1(){
    answer="1";//正答//
    discri_answer();//関数呼び出し//
}


function cor2(){
    answer="2";//正答//
    discri_answer();//関数呼び出し//
}


function cor3(){
    answer="3";//正答//
    discri_answer();//関数呼び出し//
}


function cor4(){
    answer="4";//正答//
    discri_answer();//関数呼び出し//
}

function cor5(){
    answer="5";//正答//
    discri_answer();//関数呼び出し//
}

//正誤チェック//
function discri_answer() {
    column = document.getElementById("output");
    if(correct == answer && q_number != total_number-1){
        column.innerHTML = "<strong><font size='5' color='#ff0000'>選択肢[" + correct + "]　正解！！</font></strong> <input id='next_but' type='button' value='クリックして次へ進もう' onclick='next();'/><br><br>";
        c_number++;
        columnq = document.getElementById("c_num");
        columnq.innerHTML = c_number;
    }
    else if(correct != answer && q_number != total_number-1){
        column.innerHTML = "<strong><font size='5' color='#0000ff'>残念！！正解は[" + correct + "]</font></strong> <input id='next_but' type='button' value='クリックして次へ進もう' onclick='next();'/><br><br>";
    }


    else if(correct == answer && q_number == total_number-1){
        c_number++;
        ratio=c_number/total_number*100;
        ratio=ratio.toFixed();
        time=(Date.now()-time)/1000;
        compliment="";
        if(ratio<=60){
            compliment="<font color='#000077' size='10'><i>[C評価]もう一度基本知識を身に着けましょう</i></font>";
        }
        else if(ratio>60 && ratio<=75){
            compliment="<font color='#005500' size='10'><i>[B評価]もう少し練習しましょう</i></font>";
        }
        else if(ratio>75 && ratio<=90){
            compliment="<font color='#ff4500' size='10'><i>[A評価]良く出来ていますが見直しをしましょう</i></font>";
        }
        else if(ratio>90){
            compliment="<font color='#880000' size='10'><i>[C評価]完璧です、次のレベルに進もう</i></font>";
        }
        else{
            compliment="完璧です、次のレベルに進もう";
        }

        column.innerHTML = "<strong><font size='5' color='#ff0000'>選択肢[" + correct + "]　正解！！</font> <font size='5'>全問終了!!お疲れさまでした。</font></strong><br><br><font size='5'>かかった時間は<strong>" + time + "秒</strong>　正答率は" + c_number + "/" + total_number + "=<strong>" + ratio + "％</strong>でした</font><br><br><strong>" + compliment + "</strong><br><br><a href='area_high_s.html'>S評価の類題</a><br><br><a href='area_high_a.html'>A評価の類題</a><br><br><a href='area_high_b.html'>B評価の類題</a><br><br><a href='area_high_c.html'>C評価の類題</a><br><br><input id='next_but' type='button' value='もう一度挑戦する' onclick='reflesh();'/><br><br><input id='next_but' type='button' value='前のページに戻る' onclick='last();'/><br><br>";
        columnq = document.getElementById("c_num");
        columnq.innerHTML = c_number;
    }


    else if(correct != answer && q_number == total_number-1){
        ratio=c_number/total_number*100;
        ratio=ratio.toFixed(2)
        time=(Date.now()-time)/1000;
        compliment="";
        if(ratio<=25){
            compliment="<font color='#000077' size='10'><i>もう一度基本知識を身に着けましょう</i></font>";
        }
        else if(ratio>25 && ratio<=70){
            compliment="<font color='#005500' size='10'><i>もう少し練習しましょう</i></font>";
        }
        else if(ratio>70 && ratio<=99){
            compliment="<font color='#ff4500' size='10'><i>良く出来ていますが見直しをしましょう</i></font>";
        }
        else if(ratio>99){
            compliment="<font color='#880000' size='10'><i>完璧です、次のレベルに進もう</i></font>";
        }
        else{
            compliment="完璧です、次のレベルに進もう";
        }
        column.innerHTML = "<strong><font size='5' color='#0000ff'>残念！！正解は[" + correct + "]</font> <font size='5'>全問終了!!お疲れさまでした。</font></strong><br><br><font size='5'>かかった時間は<strong>" + time + "秒</strong>　正答率は" + c_number + "/" + total_number + "=<strong>" + ratio + "％</strong>でした</font><br><br><strong>" + compliment + "</strong><br><br><a href='area_high_s.html'>S評価の類題</a><br><br><a href='area_high_a.html'>A評価の類題</a><br><br><a href='area_high_b.html'>B評価の類題</a><br><br><a href='area_high_c.html'>C評価の類題</a><br><br><input id='next_but' type='button' value='もう一度挑戦する' onclick='reflesh();'/><br><br><input id='next_but' type='button' value='前のページに戻る' onclick='last();'/><br><br>";
    }

    
    document.getElementById("but1").disabled = true;
    document.getElementById("but2").disabled = true;
    document.getElementById("but3").disabled = true;
    document.getElementById("but4").disabled = true;
    document.getElementById("but5").disabled = true;
}


function reflesh(){
    window.location.reload();
}


function last(){
    window.history.back();
}


function next() {
    q_number++;
    column = document.getElementById("output");
    column.innerHTML = "";
    document.getElementById("but1").disabled = false;
    document.getElementById("but2").disabled = false;
    document.getElementById("but3").disabled = false;
    document.getElementById("but4").disabled = false;
    document.getElementById("but5").disabled = false;
    select_question()
    if(q_number!=total_number){
        columnq = document.getElementById("q_num");
        columnq.innerHTML = q_number+1;
    }
    columnq = document.getElementById("quest");
    columnq.innerHTML = question;
    column1 = document.getElementById("but1");
    column1.value = "[1]　" + select1;
    column2 = document.getElementById("but2");
    column2.value = "[2]　" + select2;
    column3 = document.getElementById("but3");
    column3.value = "[3]　" + select3;
    column4 = document.getElementById("but4");
    column4.value = "[4]　" + select4;
    column5 = document.getElementById("but5");
    column5.value = "[5]　" + select5;
}


while(order[total_number-1] == 0 && k<10){
    r=Math.floor(Math.random() * total_q_number + 1);
    for(let j=0; j<total_number; j++){
        if(order[j]==r){
            break;
        }
        if(order[j]==0){
            order[j]=r;
            break;
        }
    }
    k=k+1;
}


if(k==10){
    for(let i=0; i<total_number; i++){
        order[i]=i+1;
    }
}


qu_number=q_number+1;
select_question();
document.open();
document.write(total_number + "問中　<span id='q_num'>" + qu_number + "</span>問目　正解数<span id='c_num'>" + c_number + "</span>");
document.write("<p><div id='quest'>" + question + "　選択肢をクリックしてください</div></p><br>");
document.write("<div id='output'></div>");
document.write("<input id='but1' type='button' style='text-align: left; width:75%;font-size:15px;' value=[1]　" + select1 + " onclick='cor1();'/><br><br>");
document.write("<input id='but2' type='button' style='text-align: left; width:75%;font-size:15px;' value=[2]　" + select2 + " onclick='cor2();'/><br><br>");
document.write("<input id='but3' type='button' style='text-align: left; width:75%;font-size:15px;' value=[3]　" + select3 + " onclick='cor3();'/><br><br>");
document.write("<input id='but4' type='button' style='text-align: left; width:75%;font-size:15px;' value=[4]　" + select4 + " onclick='cor4();'/><br><br>");
document.write("<input id='but5' type='button' style='text-align: left; width:75%;font-size:15px;' value=[5]　" + select5 + " onclick='cor5();'/><br><br>");
document.close();
time=Date.now();
        </script>
    </body>
</html>
